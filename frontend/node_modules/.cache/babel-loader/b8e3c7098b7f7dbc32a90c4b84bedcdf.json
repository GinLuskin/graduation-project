{"ast":null,"code":"import _slicedToArray from\"/Users/reginaluskin/Desktop/Graduation-Project/GraduationProject/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useRef,useState,useEffect}from'react';import Button from'./Button';import'./ImageUpload.css';var ImageUpload=function ImageUpload(props){var _useState=useState(),_useState2=_slicedToArray(_useState,2),file=_useState2[0],setFile=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),previewUrl=_useState4[0],setPreviewUrl=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isValid=_useState6[0],setIsValid=_useState6[1];var filePickerRef=useRef();useEffect(function(){if(!file){return;}var fileReader=new FileReader();fileReader.onload=function(){setPreviewUrl(fileReader.result);};fileReader.readAsDataURL(file);},[file]);var pickedHandler=function pickedHandler(event){var pickedFile;var fileIsValid=isValid;if(event.target.files||event.target.files.length===1){pickedFile=event.target.files[0];setFile(pickedFile);setIsValid(true);fileIsValid=true;}else{setIsValid(false);fileIsValid=false;}props.onInput(props.id,pickedFile,fileIsValid);};var pickImageHandler=function pickImageHandler(){filePickerRef.current.click();};return/*#__PURE__*/React.createElement(\"div\",{className:\"form-control\"},/*#__PURE__*/React.createElement(\"input\",{id:props.id,ref:filePickerRef,style:{display:'none'},type:\"file\",accept:\".jpg,.png,.jpeg\",onChange:pickedHandler}),/*#__PURE__*/React.createElement(\"div\",{className:\"image-upload \".concat(props.center&&'center')},/*#__PURE__*/React.createElement(\"div\",{className:\"image-upload__preview\"},previewUrl&&/*#__PURE__*/React.createElement(\"img\",{src:previewUrl,alt:\"Preview\"}),!previewUrl&&/*#__PURE__*/React.createElement(\"p\",null,\"Please pick an image.\")),/*#__PURE__*/React.createElement(Button,{type:\"button\",onClick:pickImageHandler},\"PICK IMAGE\")),!isValid&&/*#__PURE__*/React.createElement(\"p\",null,props.errorText));};export default ImageUpload;","map":{"version":3,"names":["React","useRef","useState","useEffect","Button","ImageUpload","props","file","setFile","previewUrl","setPreviewUrl","isValid","setIsValid","filePickerRef","fileReader","FileReader","onload","result","readAsDataURL","pickedHandler","event","pickedFile","fileIsValid","target","files","length","onInput","id","pickImageHandler","current","click","display","center","errorText"],"sources":["/Users/reginaluskin/Desktop/Graduation-Project/GraduationProject/src/shared/components/FormElements/ImageUpload.js"],"sourcesContent":["import React, { useRef, useState, useEffect } from 'react';\n\nimport Button from './Button'\nimport './ImageUpload.css';\n\nconst ImageUpload = (props) => {\n\n  const [file, setFile] = useState();\n  const [previewUrl, setPreviewUrl] = useState();\n  const [isValid , setIsValid] = useState(false);\n  \n  const filePickerRef = useRef();\n\n  useEffect(() => {\n    if (!file) {\n      return;\n    }\n    const fileReader = new FileReader();\n    fileReader.onload = () => {\n      setPreviewUrl(fileReader.result);\n    };\n    fileReader.readAsDataURL(file);\n  }, [file]);\n\n\n  const pickedHandler = event => {\n    let pickedFile;\n    let fileIsValid =  isValid;\n    if(event.target.files || event.target.files.length === 1){\n        pickedFile  = event.target.files[0];\n        setFile(pickedFile);\n        setIsValid(true);\n        fileIsValid = true;\n    } else {\n        setIsValid(false);\n        fileIsValid = false;\n    }\n    props.onInput(props.id, pickedFile, fileIsValid);\n  };\n\n  const pickImageHandler = () => {\n    filePickerRef.current.click();\n  };\n\n  return (\n    <div className=\"form-control\">\n      <input\n        id={props.id}\n        ref={filePickerRef}\n        style={{ display: 'none' }}\n        type='file'\n        accept='.jpg,.png,.jpeg'\n        onChange={pickedHandler}\n      />\n      <div  className={`image-upload ${props.center && 'center'}`}>\n        <div className='image-upload__preview'>\n            {previewUrl && <img src={previewUrl}  alt=\"Preview\" />}\n            {!previewUrl && <p>Please pick an image.</p>}\n        </div>\n        <Button type=\"button\" onClick={pickImageHandler}>PICK IMAGE</Button>\n      </div>\n      {!isValid && <p>{props.errorText}</p>}\n    </div>\n  );\n};\n\nexport default ImageUpload;\n"],"mappings":"mJAAA,MAAOA,MAAK,EAAIC,MAAM,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAE1D,MAAOC,OAAM,KAAM,UAAU,CAC7B,MAAO,mBAAmB,CAE1B,GAAMC,YAAW,CAAG,QAAdA,YAAW,CAAIC,KAAK,CAAK,CAE7B,cAAwBJ,QAAQ,EAAE,wCAA3BK,IAAI,eAAEC,OAAO,eACpB,eAAoCN,QAAQ,EAAE,yCAAvCO,UAAU,eAAEC,aAAa,eAChC,eAA+BR,QAAQ,CAAC,KAAK,CAAC,yCAAvCS,OAAO,eAAGC,UAAU,eAE3B,GAAMC,cAAa,CAAGZ,MAAM,EAAE,CAE9BE,SAAS,CAAC,UAAM,CACd,GAAI,CAACI,IAAI,CAAE,CACT,OACF,CACA,GAAMO,WAAU,CAAG,GAAIC,WAAU,EAAE,CACnCD,UAAU,CAACE,MAAM,CAAG,UAAM,CACxBN,aAAa,CAACI,UAAU,CAACG,MAAM,CAAC,CAClC,CAAC,CACDH,UAAU,CAACI,aAAa,CAACX,IAAI,CAAC,CAChC,CAAC,CAAE,CAACA,IAAI,CAAC,CAAC,CAGV,GAAMY,cAAa,CAAG,QAAhBA,cAAa,CAAGC,KAAK,CAAI,CAC7B,GAAIC,WAAU,CACd,GAAIC,YAAW,CAAIX,OAAO,CAC1B,GAAGS,KAAK,CAACG,MAAM,CAACC,KAAK,EAAIJ,KAAK,CAACG,MAAM,CAACC,KAAK,CAACC,MAAM,GAAK,CAAC,CAAC,CACrDJ,UAAU,CAAID,KAAK,CAACG,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CACnChB,OAAO,CAACa,UAAU,CAAC,CACnBT,UAAU,CAAC,IAAI,CAAC,CAChBU,WAAW,CAAG,IAAI,CACtB,CAAC,IAAM,CACHV,UAAU,CAAC,KAAK,CAAC,CACjBU,WAAW,CAAG,KAAK,CACvB,CACAhB,KAAK,CAACoB,OAAO,CAACpB,KAAK,CAACqB,EAAE,CAAEN,UAAU,CAAEC,WAAW,CAAC,CAClD,CAAC,CAED,GAAMM,iBAAgB,CAAG,QAAnBA,iBAAgB,EAAS,CAC7Bf,aAAa,CAACgB,OAAO,CAACC,KAAK,EAAE,CAC/B,CAAC,CAED,mBACE,2BAAK,SAAS,CAAC,cAAc,eAC3B,6BACE,EAAE,CAAExB,KAAK,CAACqB,EAAG,CACb,GAAG,CAAEd,aAAc,CACnB,KAAK,CAAE,CAAEkB,OAAO,CAAE,MAAO,CAAE,CAC3B,IAAI,CAAC,MAAM,CACX,MAAM,CAAC,iBAAiB,CACxB,QAAQ,CAAEZ,aAAc,EACxB,cACF,2BAAM,SAAS,wBAAkBb,KAAK,CAAC0B,MAAM,EAAI,QAAQ,CAAG,eAC1D,2BAAK,SAAS,CAAC,uBAAuB,EACjCvB,UAAU,eAAI,2BAAK,GAAG,CAAEA,UAAW,CAAE,GAAG,CAAC,SAAS,EAAG,CACrD,CAACA,UAAU,eAAI,qDAA4B,CAC1C,cACN,oBAAC,MAAM,EAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAEmB,gBAAiB,eAAoB,CAChE,CACL,CAACjB,OAAO,eAAI,6BAAIL,KAAK,CAAC2B,SAAS,CAAK,CACjC,CAEV,CAAC,CAED,cAAe5B,YAAW"},"metadata":{},"sourceType":"module"}